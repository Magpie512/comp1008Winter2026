package quiz;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.CsvSource;
import org.junit.jupiter.params.provider.ValueSource;
import static org.junit.jupiter.api.Assertions.*;

public class Main {

    private double price; //pos only
    private String modelNumber; //Regex ^[A-Z]{3}\d{3}$
    private int[] warrantyYears;
    
    public Main(double price, String modelNumber, int[] warrantyYears) {
        if (price <= 0) {
            throw new IllegalArgumentException("Price must be positive.");
        }
        if (!String.valueOf(modelNumber).matches("^[A-Z]{3}\\d{3}$")) {
            throw new IllegalArgumentException("Invalid model number format.");
        }
        this.price = price;
        this.modelNumber = modelNumber;
        this.warrantyYears = warrantyYears;
    }

    public double getPrice() {
        return price;
    }

    public String getModelNumber() {
        return modelNumber;
    }

    public int[] getWarrantyYears() {
        return warrantyYears;
    }

    //Str builder
    @Override
    public String toString() {
        StringBuilder strbuild = new StringBuilder();
        strbuild.append("Price: ").append(price).append("\n");
        strbuild.append("Model Number: ").append(modelNumber).append("\n");
        strbuild.append("Warranty Years: ");
        for (int year : warrantyYears) {
            strbuild.append(year).append(" ");
        }
        return strbuild.toString();
    }

    // Regular Test for price
    @Test
    public void testPriceValidation() {
        Exception exception = assertThrows(IllegalArgumentException.class, () -> {
            new Main(-10, "ABC123", new int[]{1, 2});
        });
        assertEquals("Price must be positive.", exception.getMessage());
    }

    // p test for price
    @ParameterizedTest
    @ValueSource(doubles = {100.0, 200.0, 300.0})
    public void testValidPrice(double price) {
        Main product = new Main(price, "ABC123", new int[]{1, 2});
        assertEquals(price, product.price);     
    }

    //r test for model number
    @ParameterizedTest
    @ValueSource(strings = {"ABC123", "XYZ789"})
    public void testValidModelNumber(String modelNumber) {
        Main product = new Main(100, modelNumber, new int[]{1, 2});
        assertEquals(modelNumber, product.modelNumber);
    }

    //p test for model number
    @ParameterizedTest
    @ValueSource(strings = {"abc123", "AB1234", "A1B2C3"})
    public void testInvalidModelNumber(String modelNumber) {
        Exception exception = assertThrows(IllegalArgumentException.class, () -> {
            new Main(100, modelNumber, new int[]{1, 2});
        });
        assertEquals("Invalid model number format.", exception.getMessage());
    }
    
}
